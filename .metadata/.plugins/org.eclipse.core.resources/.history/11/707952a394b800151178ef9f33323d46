package mbeans;

import java.io.IOException;
import java.io.InputStream;
import java.io.Serializable;

import javax.ejb.EJB;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.servlet.http.Part;

import sessionBeans.FileService;
import entities.FileInfo;

 



 

 
@ManagedBean
@ViewScoped
public class Upload  implements Serializable{
	/**
	 * 
	 */
 @EJB
 private FileService fileservice;
	private String FullName;
	private String FileName;
	private String FPath;
	private Part file;
	private java.util.Date uploaded;
	
	private static final long serialVersionUID = 1L;
	public String getFullName() {
		return FullName;
	}
	public void setFullName(String fullName) {
		FullName = fullName;
	}
	public String getFileName() {
		return FileName;
	}
	public void setFileName(String fileName) {
		FileName = fileName;
	}
	public String getFPath() {
		return FPath;
	}
	public void setFPath(String fPath) {
		FPath = fPath;
	}
	public Part getFile() {
		return file;
	}
	public void setFile(Part file) {
		this.file = file;
	}
	public java.util.Date getUploaded() {
		return uploaded;
	}
	public void setUploaded(java.util.Date uploaded) {
		this.uploaded = uploaded;
	}
	public void uploadFile(){
		 FileInfo fi=new FileInfo();
		 fi.setUploaded(uploaded);
		 fi.setUploadedBy(FullName);
		 fi.setFileName(FileName);
		byte[] results=new byte[(int)file.getSize()];
        try {
        	  System.out.println("Done Mlizozo");
			InputStream in=file.getInputStream();
			  in.read(results); 
			 // fs.addFile(fi, "", in);
			  System.out.println("Done Mlizozo");
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

	}

}
