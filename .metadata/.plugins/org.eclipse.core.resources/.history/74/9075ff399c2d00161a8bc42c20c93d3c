package infosource.processors;

import org.codehaus.jettison.json.JSONException;
import org.codehaus.jettison.json.JSONObject;

public class JsonBuilder {
	public Object[] results;
	public String errorMessage;
	public boolean hasErrors = false;

	public Object[] getResults() {
		return results;
	}

	public JsonBuilder(String exchange1, String exchange2) {
		 Object [] ob= new Object[2];
		JSONObject json;
		json = new JSONObject();
		ob[0]=extractData(exchange1);
		ob[0]=extractData(exchange2);
		//json.append("response"+json.length(), extractData(exchange1));
		//json.append("response"+json.length(),extractData(exchange2));
		
		results =ob;
		
	}

	public JSONObject extractData(String message) {
		JSONObject extractedMessage = null;
		try {
			JSONObject jsonObject = new JSONObject(message);
			JSONObject data = jsonObject.getJSONObject(
					"org.apache.cxf.message.MessageContentsList")
					.getJSONObject("list");
			if (data.has("list")) {
				data = data.getJSONObject("list");
			}
			extractedMessage = data;
			System.out.println(data.toString());
		} catch (JSONException e) {
			hasErrors = true;
			errorMessage = e.getMessage() + "\n class:" + e.getClass();
		}

		return extractedMessage;
	}
}
