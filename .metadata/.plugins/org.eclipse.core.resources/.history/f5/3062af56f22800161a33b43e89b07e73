package infosource.open.services.testing;

import java.util.List;

import javax.json.JsonString;

import infosource.open.services.access.TransactionManager;

import org.codehaus.jettison.json.JSONException;
import org.codehaus.jettison.json.JSONObject;
import org.junit.Test;

import com.google.gson.Gson;

import useraccount.soap.services.Person;

public class TransactionManagerTests {

	
	@Test
	public void should_call_transaction_manager_invoker_service() throws JSONException{
		TransactionManager ser=new TransactionManager();
		System.out.println("Test running");
		String resp=ser.getMyProfile();
	 
		Gson j=new Gson();
		JSONObject on=  new JSONObject(resp);
		
		Person psn=j.fromJson((on.getJSONObject("org.apache.cxf.message.MessageContentsList").getJSONObject("list").getJSONObject("list").getJSONArray("useraccount.soap.services.Person").getString(0)), Person.class);
		List<Person> people= (List<Person>) j.fromJson(on.getJSONObject("org.apache.cxf.message.MessageContentsList").getJSONObject("list").getJSONObject("list").getJSONArray("useraccount.soap.services.Person").toString(), Person.class);
		
		System.out.println("\ntest if values assigned");
		 System.out.println("ITEM FOUND: "+on.getJSONObject("org.apache.cxf.message.MessageContentsList").getJSONObject("list").getJSONObject("list").getJSONArray("useraccount.soap.services.Person").getString(0));
		System.out.println("ITEM FOUND: "+psn.getDn());
		System.out.println("ITEM FOUND: "+psn.getLastName());
		
	}
}
