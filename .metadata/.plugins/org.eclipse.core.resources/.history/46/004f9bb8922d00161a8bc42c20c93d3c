package infosource.processors;

import org.codehaus.jettison.json.JSONException;
import org.codehaus.jettison.json.JSONObject;
import org.springframework.messaging.support.ErrorMessage;

public class JsonBuilder {
	public String results;

	public String getResults() {
		return results;
	}

	public JsonBuilder(String exchange1, String exchange2) {

		// JSONObject json = new JSONObject();
		results = extractData(exchange2);
	}

	public String extractData(String message) {
		String rs = "";
		boolean hasErrors = false;
		try {
			JSONObject json = new JSONObject(message);
			JSONObject entity = json.getJSONObject(
					"org.apache.cxf.message.MessageContentsList")
					.getJSONObject("list");
			if (entity.has("list")) {
				entity = entity.getJSONObject("list");
			}
			rs = entity.toString();
		} catch (JSONException e) {
			hasErrors = true;
			String errorMessage = e.getMessage() + "\n class:" + e.getClass();
			}

		return rs;
	}
}
