package infosource.open.services.routing;

import infosource.open.services.processors.RemoteMethodHandler;

import org.apache.camel.Exchange;
import org.apache.camel.Processor;
import org.apache.camel.builder.RouteBuilder;
import org.springframework.stereotype.Component;
@Component
public class RouteManager extends RouteBuilder {

	@Override
	public void configure() throws Exception {

		// get
		 from("direct:getFeeds").process(new RemoteMethodHandler()).to("cxf:bean:NewsFeeds").marshal().json().to("stream:out");
		
		//get file info
		from("direct:getFileInfo").process(new Processor() {
			@Override
			public void process(Exchange exchange) throws Exception {
 				exchange.getOut().setHeader("OperationName", exchange.getIn().getHeader("methodName"));
			 	exchange.getOut().setBody(exchange.getIn().getBody());
				exchange.getOut().setHeader("OperationNamespace", "http://services.docman/");
				}
		}).to("cxf:bean:DocManEndpoint").marshal().json().to("stream:out");
		
		//user account management
		
		from("direct:UAService").process(new Processor() {
			@Override
			public void process(Exchange exchange) throws Exception {
				exchange.getOut().setHeader("OperationName", exchange.getIn().getHeader("methodName"));
			 	exchange.getOut().setBody(exchange.getIn().getBody());
				exchange.getOut().setHeader("OperationNamespace", "http://services.soap.useraccount/");
			}
		}).to("cxf:bean:UAService");

		/*
		 * .when(header("remoteMethod").isEqualTo("")).to("")
		 * .when(header("remoteMethod").isEqualTo("")).to("").otherwise()
		 * .to("").endChoice().endChoice().to("cxf:bean:NewsEndpoint");
		 */
	}

}
